{% extends "core/base.html" %}
{% load static %}

{% block page_title %}Yargƒ± Kararlarƒ± - Lexatech{% endblock %}

{% block extra_styles %}
<style>
/* Modern, Clean CSS */
* {
    box-sizing: border-box;
}

body {
    background: #f8fafc;
    font-family: 'Inter', system-ui, sans-serif;
    line-height: 1.6;
    color: #1f2937;
}

/* Modern Header */
.header {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
    color: white;
    padding: 3rem 0;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    z-index: 1;
}

.header-content {
    position: relative;
    z-index: 2;
}

.header h1 {
    font-size: 3rem;
    font-weight: 800;
    margin: 0 0 0.75rem 0;
    background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.header p {
    font-size: 1.2rem;
    opacity: 0.85;
    margin: 0;
    font-weight: 300;
    letter-spacing: 0.5px;
}

.header-stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1.5rem;
    font-size: 0.9rem;
    opacity: 0.7;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.stat-icon {
    font-size: 1rem;
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* Modern Search Section */
.search-section {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
    margin: -2rem auto 2rem;
    border-radius: 20px;
    box-shadow: 
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04);
    padding: 2.5rem;
    position: relative;
    z-index: 10;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.search-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.02) 0%, rgba(147, 197, 253, 0.02) 100%);
    border-radius: 20px;
    z-index: -1;
}

.search-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
    text-align: center;
    color: #1e293b;
    position: relative;
}

.search-title::after {
    content: '';
    position: absolute;
    bottom: -0.5rem;
    left: 50%;
    transform: translateX(-50%);
    width: 3rem;
    height: 3px;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    border-radius: 2px;
}

.search-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.search-input-full {
    grid-column: 1 / -1;
}

.form-group {
    display: flex;
    flex-direction: column;
    position: relative;
}

.form-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #475569;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.form-label::before {
    content: '';
    width: 4px;
    height: 4px;
    background: #3b82f6;
    border-radius: 50%;
}

.form-input {
    padding: 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
}

.form-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 
        0 0 0 4px rgba(59, 130, 246, 0.1),
        0 4px 6px -1px rgba(0, 0, 0, 0.1);
    transform: translateY(-1px);
    background: white;
}

.form-input:hover {
    border-color: #cbd5e1;
}

.search-input-wrapper {
    position: relative;
}

.search-input {
    padding-left: 3rem;
    font-weight: 500;
}

.search-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: #64748b;
    font-size: 1.1rem;
    z-index: 2;
}

.button-group {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 1rem;
}

.btn {
    padding: 1rem 2rem;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    overflow: hidden;
    min-width: 140px;
    justify-content: center;
}

.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
}

.btn:hover::before {
    left: 100%;
}

.btn-primary {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.btn-primary:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

.btn-secondary {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    color: #475569;
    border: 2px solid #e2e8f0;
}

.btn-secondary:hover {
    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
    transform: translateY(-1px);
    border-color: #cbd5e1;
}

/* Modern Results */
.results-section {
    margin-bottom: 3rem;
}

.results-header {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    padding: 1.5rem;
    border-radius: 16px;
    margin-bottom: 1.5rem;
    box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.results-count {
    font-weight: 700;
    color: #1e293b;
    font-size: 1.125rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.results-count::before {
    content: 'üîç';
    font-size: 1.25rem;
}

.results-info {
    font-size: 0.875rem;
    color: #64748b;
    background: rgba(59, 130, 246, 0.1);
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
}

.results-grid {
    display: grid;
    gap: 1.5rem;
}

.result-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
}

.result-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    transform: scaleY(0);
    transition: transform 0.3s ease;
}

.result-card:hover::before {
    transform: scaleY(1);
}

.result-card:hover {
    box-shadow: 
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transform: translateY(-4px);
}

.result-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 1rem;
}

.court-badge {
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
    color: #475569;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.court-badge.yargitay { 
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); 
    color: #92400e; 
    border-color: #fbbf24;
}
.court-badge.danistay { 
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); 
    color: #1e40af; 
    border-color: #60a5fa;
}
.court-badge.sayistay { 
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); 
    color: #065f46; 
    border-color: #34d399;
}
.court-badge.anayasa { 
    background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); 
    color: #9f1239; 
    border-color: #f472b6;
}

.result-date {
    font-size: 0.875rem;
    color: #64748b;
    background: rgba(100, 116, 139, 0.1);
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-weight: 500;
}

.result-title {
    font-weight: 700;
    margin-bottom: 0.75rem;
    color: #1e293b;
    font-size: 1.125rem;
    line-height: 1.4;
}

.result-numbers {
    display: flex;
    gap: 1.5rem;
    font-size: 0.875rem;
    color: #64748b;
    margin-bottom: 1rem;
    padding: 0.75rem;
    background: rgba(59, 130, 246, 0.05);
    border-radius: 8px;
    border-left: 3px solid #3b82f6;
}

.result-numbers span {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.result-numbers strong {
    color: #475569;
}

.result-summary {
    color: #475569;
    margin-bottom: 1.5rem;
    line-height: 1.7;
    font-size: 0.95rem;
    max-height: none;
    overflow: visible;
    text-align: justify;
    white-space: pre-wrap;
    word-wrap: break-word;
}

.result-link {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.875rem;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(59, 130, 246, 0.1);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.result-link:hover {
    color: #1d4ed8;
    background: rgba(59, 130, 246, 0.2);
    transform: translateX(4px);
}

/* Modern Pagination */
.pagination {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin: 3rem 0;
    padding: 1.5rem;
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-radius: 16px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.page-link {
    padding: 0.75rem 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    color: #475569;
    text-decoration: none;
    transition: all 0.3s ease;
    font-weight: 600;
    min-width: 48px;
    text-align: center;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
}

.page-link:hover {
    background: rgba(59, 130, 246, 0.1);
    border-color: #3b82f6;
    color: #3b82f6;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.2);
}

.page-link.active {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border-color: #3b82f6;
    color: white;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.page-link.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    background: #f1f5f9;
    border-color: #e2e8f0;
}

.page-link.disabled:hover {
    transform: none;
    box-shadow: none;
}

/* Loading */
.loading {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.loading-content {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
}

.spinner {
    border: 3px solid #f3f4f6;
    border-top: 3px solid #3b82f6;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 3rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

.empty-icon {
    font-size: 3rem;
    color: #9ca3af;
    margin-bottom: 1rem;
}

.empty-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
}

.empty-text {
    color: #6b7280;
}


/* Custom Date Range CSS */
.date-range-toggle {
    margin-top: 0.5rem;
}

.custom-date-range {
    display: none;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    margin-top: 0.75rem;
    padding: 0.75rem;
    background: #f9fafb;
    border-radius: 6px;
    border: 1px solid #e5e7eb;
}

.custom-date-range.show {
    display: grid;
}

.date-input-group {
    display: flex;
    flex-direction: column;
}

.date-input-group label {
    font-size: 0.75rem;
    color: #6b7280;
    margin-bottom: 0.25rem;
}

.date-input {
    padding: 0.5rem;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    font-size: 0.875rem;
}

.date-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: #374151;
}

.checkbox-wrapper input[type="checkbox"] {
    width: 1rem;
    height: 1rem;
    accent-color: #3b82f6;
}


.search-input-full {
    grid-column: 1 / -1 !important;
    width: 100% !important;
}

.search-input-wrapper {
    position: relative;
    width: 100% !important;
}

.large-search-input {
    font-size: 1.15rem !important;
    padding: 1.5rem 3.5rem !important;
    min-height: 65px !important;
    font-weight: 500 !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

.search-icon {
    position: absolute;
    left: 1.25rem !important;
    top: 50%;
    transform: translateY(-50%);
    color: #64748b;
    font-size: 1.3rem !important;
    z-index: 2;
}

.form-input {
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Mobile */
@media (max-width: 768px) {
    .header h1 { font-size: 2rem; }
    .search-section { margin: -0.5rem 1rem 1rem; padding: 1.5rem; }
    .search-grid { grid-template-columns: 1fr; }
    .button-group { flex-direction: column; }
    .results-header { flex-direction: column; gap: 0.5rem; align-items: start; }
    .result-numbers { flex-direction: column; gap: 0.25rem; }
}
</style>
{% endblock %}

{% block content %}
<!-- Modern Header -->
<div class="header">
    <div class="container">
        <div class="header-content">
            <h1>Yargƒ± Kararlarƒ±</h1>
            <p>Kapsamlƒ± hukuki karar arama ve analiz platformu</p>
            <div class="header-stats">
                <div class="stat-item">
                    <i class="fas fa-database stat-icon"></i>
                    <span>Geni≈ü Veri Tabanƒ±</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-search stat-icon"></i>
                    <span>Geli≈ümi≈ü Arama</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-bolt stat-icon"></i>
                    <span>Hƒ±zlƒ± Sonu√ßlar</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Search -->
<div class="container">
    <div class="search-section">
        <h2 class="search-title">Karar Arama</h2>
        <form method="get" action="{% url 'judicial_decisions' %}" id="searchForm">
            <div class="search-grid">
                <!-- Ana Arama -->
                <div class="form-group search-input-full">
                    <label class="form-label">Arama Terimi (Opsiyonel)</label>
                    <div class="search-input-wrapper">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" name="q" class="form-input search-input" 
                               placeholder="Karar metni, anahtar kelime..." value="{{ query }}">
                    </div>
                </div>
                
                <!-- Mahkeme T√ºr√º -->
                <div class="form-group">
                    <label class="form-label">Mahkeme T√ºr√º</label>
                    <select name="court_type" id="court_type" class="form-input" onchange="updateChambers()">
                        <option value="">T√ºm√º</option>
                        {% for stat in court_type_stats %}
                        <option value="{{ stat.karar_turu }}" {% if court_type == stat.karar_turu %}selected{% endif %}>
                            {{ stat.karar_turu }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                
                <!-- Daire -->
                <div class="form-group">
                    <label class="form-label">Daire</label>
                    <select name="chamber" id="chamber" class="form-input">
                        <option value="">T√ºm√º</option>
                    </select>
                </div>
                
                <!-- Karar Numarasƒ± -->
                <div class="form-group">
                    <label class="form-label">Karar Numarasƒ±</label>
                    <input type="text" name="decision_number" class="form-input" 
                           placeholder="√ñrn: 2021/1234" value="{{ decision_number }}">
                </div>
                
                <!-- Esas Numarasƒ± -->
                <div class="form-group">
                    <label class="form-label">Esas Numarasƒ±</label>
                    <input type="text" name="case_number" class="form-input" 
                           placeholder="√ñrn: 2021/5678" value="{{ case_number }}">
                </div>
                
                <!-- Tarih -->
                <div class="form-group">
                    <label class="form-label">Tarih Aralƒ±ƒüƒ±</label>
                    <select name="date_range" id="date_range" class="form-input">
                        <option value="">T√ºm Zamanlar</option>
                        <option value="today" {% if date_range == 'today' %}selected{% endif %}>Bug√ºn</option>
                        <option value="week" {% if date_range == 'week' %}selected{% endif %}>Son 1 Hafta</option>
                        <option value="month" {% if date_range == 'month' %}selected{% endif %}>Son 1 Ay</option>
                        <option value="3months" {% if date_range == '3months' %}selected{% endif %}>Son 3 Ay</option>
                        <option value="6months" {% if date_range == '6months' %}selected{% endif %}>Son 6 Ay</option>
                        <option value="year" {% if date_range == 'year' %}selected{% endif %}>Son 1 Yƒ±l</option>
                        <option value="custom" {% if date_range == 'custom' %}selected{% endif %}>√ñzel Tarih Aralƒ±ƒüƒ±</option>
                    </select>
                    
                    <div class="date-range-toggle">
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="customDateToggle" 
                                   {% if start_date or end_date %}checked{% endif %}>
                            √ñzel tarih aralƒ±ƒüƒ± kullan
                        </label>
                    </div>
                    
                    <div class="custom-date-range" id="customDateRange" 
                         {% if start_date or end_date %}style="display: grid;"{% endif %}>
                        <div class="date-input-group">
                            <label>Ba≈ülangƒ±√ß Tarihi</label>
                            <input type="date" name="start_date" class="date-input" 
                                   value="{{ start_date }}" id="startDate">
                        </div>
                        <div class="date-input-group">
                            <label>Biti≈ü Tarihi</label>
                            <input type="date" name="end_date" class="date-input" 
                                   value="{{ end_date }}" id="endDate">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="button-group">
                <button type="button" class="btn btn-secondary" onclick="clearForm()">
                    <i class="fas fa-times"></i> Temizle
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i> Ara
                </button>
            </div>
        </form>
    </div>

    <!-- Results -->
    <div class="results-section">
        {% if decisions %}
            <div>DEBUG: total_count={{ total_count }}, decisions={{ decisions|length }}</div>
                <span class="results-count">{{ total_count|floatformat:0 }} sonu√ß bulundu</span>
                <span class="results-info">({{ search_time }} ms)</span>
                {% endif %}
            </div>
            
            <div class="results-grid">
                {% for decision in decisions %}
                <div class="result-card">
                    <div class="result-header">
                        <span class="court-badge {{ decision.karar_turu|lower }}">
                            {{ decision.karar_turu }}
                        </span>
                        {% if decision.karar_tarihi %}
                        <span class="result-date">{{ decision.karar_tarihi|date:"d.m.Y" }}</span>
                        {% endif %}
                    </div>
                    
                    <h3 class="result-title">{{ decision.karar_veren_mahkeme }}</h3>
                    
                    <div class="result-numbers">
                        {% if decision.esas_numarasi %}
                        <span><strong>Esas:</strong> {{ decision.esas_numarasi }}</span>
                        {% endif %}
                        {% if decision.karar_numarasi %}
                        <span><strong>Karar:</strong> {{ decision.karar_numarasi }}</span>
                        {% endif %}
                    </div>
                    
                    {% if decision.karar_ozeti %}
                    <p class="result-summary">{{ decision.karar_ozeti }}</p>
                    {% endif %}
                    
                    <a href="{% url 'judicial_detail' decision.id %}" class="result-link">
                        Detaylarƒ± G√∂r√ºnt√ºle <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
            
            {% if decisions.has_other_pages %}
            <div class="pagination">
                {% if decisions.has_previous %}
                <a href="?q={{ query }}&court_type={{ court_type }}&chamber={{ chamber }}&date_range={{ date_range }}&start_date={{ start_date }}&end_date={{ end_date }}&decision_number={{ decision_number }}&case_number={{ case_number }}&page={{ decisions.previous_page_number }}" class="page-link">
                    <i class="fas fa-chevron-left"></i>
                </a>
                {% endif %}
                
                {% for num in page_range %}
                    {% if num == decisions.number %}
                        <span class="page-link active">{{ num }}</span>
                    {% elif num == '...' %}
                        <span class="page-link disabled">...</span>
                    {% else %}
                        <a href="?q={{ query }}&court_type={{ court_type }}&chamber={{ chamber }}&date_range={{ date_range }}&start_date={{ start_date }}&end_date={{ end_date }}&decision_number={{ decision_number }}&case_number={{ case_number }}&page={{ num }}" class="page-link">{{ num }}</a>
                    {% endif %}
                {% endfor %}
                
                {% if decisions.has_next %}
                <a href="?q={{ query }}&court_type={{ court_type }}&chamber={{ chamber }}&date_range={{ date_range }}&start_date={{ start_date }}&end_date={{ end_date }}&decision_number={{ decision_number }}&case_number={{ case_number }}&page={{ decisions.next_page_number }}" class="page-link">
                    <i class="fas fa-chevron-right"></i>
                </a>
                {% endif %}
            </div>
            {% endif %}
        {% else %}
            <div class="empty-state">
                <i class="fas fa-search empty-icon"></i>
                <h3 class="empty-title">
                    {% if query or court_type or chamber or date_range or decision_number or case_number %}
                        Sonu√ß bulunamadƒ±
                    {% else %}
                        Arama yapƒ±n
                    {% endif %}
                </h3>
                <p class="empty-text">
                    {% if query or court_type or chamber or date_range or decision_number or case_number %}
                        Farklƒ± kriterlerle tekrar deneyin
                    {% else %}
                        Yukarƒ±daki formu kullanarak yargƒ± kararlarƒ±nƒ± arayabilirsiniz
                    {% endif %}
                </p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Loading -->
<div class="loading" id="loading">
    <div class="loading-content">
        <div class="spinner"></div>
        <p>Arama yapƒ±lƒ±yor...</p>
    </div>
</div>

<script>
        // Chambers data - GLOBAL
        const chambers = {
            'YARGITAY': [
                '1. Hukuk Dairesi', '2. Hukuk Dairesi', '3. Hukuk Dairesi',
                '4. Hukuk Dairesi', '5. Hukuk Dairesi', '6. Hukuk Dairesi',
                '7. Hukuk Dairesi', '8. Hukuk Dairesi', '9. Hukuk Dairesi',
                '10. Hukuk Dairesi', '11. Hukuk Dairesi', '12. Hukuk Dairesi',
                '13. Hukuk Dairesi', '14. Hukuk Dairesi', '15. Hukuk Dairesi',
                '16. Hukuk Dairesi', '17. Hukuk Dairesi', '18. Hukuk Dairesi',
                '19. Hukuk Dairesi', '20. Hukuk Dairesi', '21. Hukuk Dairesi',
                '22. Hukuk Dairesi', '23. Hukuk Dairesi',
                '1. Ceza Dairesi', '2. Ceza Dairesi', '3. Ceza Dairesi',
                '4. Ceza Dairesi', '5. Ceza Dairesi', '6. Ceza Dairesi',
                '7. Ceza Dairesi', '8. Ceza Dairesi', '9. Ceza Dairesi',
                '10. Ceza Dairesi', '11. Ceza Dairesi', '12. Ceza Dairesi',
                '13. Ceza Dairesi', '14. Ceza Dairesi', '15. Ceza Dairesi',
                '16. Ceza Dairesi', '17. Ceza Dairesi', '18. Ceza Dairesi',
                'Hukuk Genel Kurulu', 'Ceza Genel Kurulu', 'B√ºy√ºk Genel Kurul'
            ],
            'DANI≈ûTAY': [
                '1. Daire', '2. Daire', '3. Daire', '4. Daire', '5. Daire',
                '6. Daire', '7. Daire', '8. Daire', '9. Daire', '10. Daire',
                '11. Daire', '12. Daire', '13. Daire', '14. Daire', '15. Daire',
                'ƒ∞dari Dava Daireleri Kurulu', 'Vergi Dava Daireleri Kurulu', 'Genel Kurul'
            ],
            'SAYI≈ûTAY': [
                '1. Daire', '2. Daire', '3. Daire', '4. Daire', '5. Daire',
                '6. Daire', '7. Daire', '8. Daire', '9. Daire', '10. Daire',
                'Genel Kurul'
            ],
            'ANAYASA MAHKEMESƒ∞': [
                '1. B√∂l√ºm', '2. B√∂l√ºm', 'Genel Kurul'
            ]
        };

        // Dynamic chamber loading - GLOBAL FUNCTION
        function updateChambers() {
            const courtType = document.getElementById('court_type').value;
            const chamberSelect = document.getElementById('chamber');
            
            // Reset chamber options
            chamberSelect.innerHTML = '<option value="">T√ºm√º</option>';
            
            // Debug log
            console.log('Court type selected:', courtType);
            console.log('All chambers:', chambers);
            console.log('Available chambers for', courtType, ':', chambers[courtType]);
            
            if (courtType && chambers[courtType]) {
                chambers[courtType].forEach(chamber => {
                    const option = document.createElement('option');
                    option.value = chamber;
                    option.textContent = chamber;
                    chamberSelect.appendChild(option);
                });
            }
        }

        // Date range functionality
        document.getElementById('customDateToggle').addEventListener('change', function() {
            const customRange = document.getElementById('customDateRange');
            const dateRangeSelect = document.getElementById('date_range');
            
            if (this.checked) {
                customRange.classList.add('show');
                dateRangeSelect.value = 'custom';
            } else {
                customRange.classList.remove('show');
                document.getElementById('startDate').value = '';
                document.getElementById('endDate').value = '';
                if (dateRangeSelect.value === 'custom') {
                    dateRangeSelect.value = '';
                }
            }
        });

        document.getElementById('date_range').addEventListener('change', function() {
            const customToggle = document.getElementById('customDateToggle');
            const customRange = document.getElementById('customDateRange');
            
            if (this.value === 'custom') {
                customToggle.checked = true;
                customRange.classList.add('show');
            } else if (this.value !== '') {
                customToggle.checked = false;
                customRange.classList.remove('show');
                document.getElementById('startDate').value = '';
                document.getElementById('endDate').value = '';
            }
        });

        // Clear form - GLOBAL FUNCTION
        function clearForm() {
            document.getElementById('searchForm').reset();
            document.getElementById('chamber').innerHTML = '<option value="">T√ºm√º</option>';
            document.getElementById('customDateRange').classList.remove('show');
            window.location.href = '{% url "judicial_decisions" %}';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set up court type change listener
            const courtTypeSelect = document.getElementById('court_type');
            if (courtTypeSelect) {
                courtTypeSelect.addEventListener('change', updateChambers);
                // Initial load
                updateChambers();
            }
        });
    

// Loading indicator functionality
document.addEventListener('DOMContentLoaded', function() {
    const searchForm = document.getElementById('searchForm');
    const loadingIndicator = document.getElementById('loadingIndicator');
    
    if (searchForm && loadingIndicator) {
        searchForm.addEventListener('submit', function(e) {
            // Show loading indicator
            loadingIndicator.style.display = 'flex';
            
            // Optional: Add minimum display time for better UX
            setTimeout(() => {
                // Form will submit normally
            }, 100);
        });
    }
    
    // Hide loading on page load (in case user navigates back)
    if (loadingIndicator) {
        loadingIndicator.style.display = 'none';
    }
});

    </script>
{% endblock %}