{% extends "core/base.html" %}
{% load static %}

{% block page_title %}Parola Değiştirildi | Lexatech{% endblock %}

{% block extra_styles %}
<style>
  :root {
    --royal-blue: #1a365d;
    --royal-blue-light: #2c5aa0;
    --emerald: #047857;
    --shadow-legal: 0 4px 20px rgba(26, 54, 93, 0.12);
    --shadow-premium: 0 8px 32px rgba(26, 54, 93, 0.16);
    --gradient-royal: linear-gradient(135deg, var(--royal-blue) 0%, var(--royal-blue-light) 100%);
    --gradient-emerald: linear-gradient(135deg, var(--emerald) 0%, #10b981 100%);
  }

  .success-hero {
    background: var(--gradient-emerald);
    color: white;
    padding: 100px 0;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .success-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("{% static 'core/images/background_feature.jpg' %}") center/cover;
    opacity: 0.1;
    z-index: 0;
  }

  .success-hero .container {
    position: relative;
    z-index: 1;
  }

  .success-icon {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 2rem;
    font-size: 3rem;
    border: 4px solid rgba(255,255,255,0.3);
    backdrop-filter: blur(10px);
    animation: successPulse 2s infinite;
  }

  @keyframes successPulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,0.5); }
    50% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(255,255,255,0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,255,255,0); }
  }

  .success-hero h1 {
    font-size: 2.8rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
  }

  .success-hero .lead {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto 2rem;
    line-height: 1.6;
  }

  .success-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border: none;
    border-radius: 20px;
    box-shadow: var(--shadow-premium);
    margin-top: -50px;
    position: relative;
    z-index: 2;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    overflow: hidden;
  }

  .success-header {
    background: var(--gradient-emerald);
    color: white;
    padding: 30px;
    text-align: center;
  }

  .success-header h3 {
    margin: 0;
    font-weight: 600;
    font-size: 1.5rem;
  }

  .success-body {
    padding: 40px;
    text-align: center;
  }

  .security-tips {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 25px;
    margin: 25px 0;
    border-left: 4px solid var(--emerald);
  }

  .security-tips h6 {
    color: var(--royal-blue);
    font-weight: 600;
    margin-bottom: 15px;
  }

  .tip-list {
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: left;
  }

  .tip-list li {
    padding: 8px 0;
    color: #4a5568;
    display: flex;
    align-items: center;
    font-size: 0.95rem;
  }

  .tip-list li i {
    margin-right: 12px;
    width: 20px;
    color: var(--emerald);
  }

  .btn-continue {
    background: var(--gradient-royal);
    border: none;
    border-radius: 25px;
    padding: 15px 40px;
    color: white;
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: none;
    display: inline-block;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 10px;
  }

  .btn-continue:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-legal);
    color: white;
    text-decoration: none;
  }

  .btn-secondary {
    background: transparent;
    border: 2px solid var(--royal-blue);
    color: var(--royal-blue);
  }

  .btn-secondary:hover {
    background: var(--royal-blue);
    color: white;
  }

  .countdown-message {
    background: rgba(4, 120, 87, 0.1);
    border: 1px solid rgba(4, 120, 87, 0.3);
    border-radius: 12px;
    padding: 20px;
    margin: 25px 0;
    color: var(--royal-blue);
  }

  .countdown-timer {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--emerald);
  }

  @media (max-width: 768px) {
    .success-hero {
      padding: 80px 0;
    }
    
    .success-hero h1 {
      font-size: 2.2rem;
    }

    .success-body {
      padding: 30px 20px;
    }
  }
</style>
{% endblock %}

{% block content %}
<!-- Success Hero Section -->
<div class="success-hero">
  <div class="container">
    <div class="success-icon">
      <i class="fas fa-check"></i>
    </div>
    <h1>Parola Başarıyla Değiştirildi!</h1>
    <p class="lead">
      Hesabınızın güvenliği artırıldı. Yeni parolanız ile sisteme giriş yapabilirsiniz.
    </p>
  </div>
</div>

<div class="container">
  <!-- Success Message Card -->
  <div class="success-card">
    <div class="success-header">
      <h3><i class="fas fa-shield-check me-2"></i>Güvenlik Güncellemesi Tamamlandı</h3>
    </div>
    <div class="success-body">
      {% if password_changed %}
      <div class="alert alert-success" style="border: none; border-radius: 12px; background: #c6f6d5; color: #22543d;">
        <h5><i class="fas fa-info-circle me-2"></i>Önemli Bilgilendirme</h5>
        <p class="mb-2"><strong>{{ changed_username }}</strong> kullanıcısının parola değişikliği işlemi başarıyla gerçekleştirilmiştir.</p>
        <p class="mb-0"><strong>Güvenliğiniz için tüm cihazlardan otomatik olarak çıkış yapılacaktır.</strong></p>
      </div>
      {% else %}
      <div class="alert alert-info" style="border: none; border-radius: 12px; background: #bee3f8; color: #2c5282;">
        <h5><i class="fas fa-info-circle me-2"></i>Güvenlik Bilgilendirmesi</h5>
        <p class="mb-0">Parola değişikliği işlemi gerçekleştirilmiştir. Güvenliğiniz için yeni parolanız ile giriş yapınız.</p>
      </div>
      {% endif %}

      <!-- Countdown Message -->
      <div class="countdown-message">
        <h6><i class="fas fa-clock me-2"></i>Otomatik Yönlendirme</h6>
        <p class="mb-2">Güvenliğiniz için <span class="countdown-timer" id="countdown">10</span> saniye sonra giriş sayfasına yönlendirileceksiniz.</p>
        <small>Yeni parolanız ile tekrar giriş yapmanız gerekecektir.</small>
      </div>

      <!-- Security Tips -->
      <div class="security-tips">
        <h6><i class="fas fa-lightbulb me-2"></i>Güvenlik Hatırlatması</h6>
        <ul class="tip-list">
          <li><i class="fas fa-check-circle"></i> Yeni parolanızı güvenli bir yerde saklayın</li>
          <li><i class="fas fa-eye-slash"></i> Parolanızı kimseyle paylaşmayın</li>
          <li><i class="fas fa-mobile-alt"></i> Farklı cihazlardan giriş yapmanız gerekebilir</li>
          <li><i class="fas fa-clock"></i> Düzenli olarak parolanızı değiştirmeyi unutmayın</li>
        </ul>
      </div>

      <!-- Action Buttons -->
      <div class="text-center">
        <a href="{% url 'account_login' %}" class="btn-continue">
          <i class="fas fa-sign-in-alt me-2"></i>Şimdi Giriş Yap
        </a>
        <br>
        <a href="{% url 'home' %}" class="btn-continue btn-secondary">
          <i class="fas fa-home me-2"></i>Ana Sayfaya Dön
        </a>
      </div>
    </div>
  </div>
</div>

<br><br>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    let countdown = 10;
    const countdownElement = document.getElementById('countdown');
    
    const timer = setInterval(function() {
        countdown--;
        countdownElement.textContent = countdown;
        
        if (countdown <= 0) {
            clearInterval(timer);
            // Logout user and redirect to login
            window.location.href = "{% url 'account_logout' %}";
        }
    }, 1000);
    
    // Add success animation to cards
    const cards = document.querySelectorAll('.success-card, .security-tips');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.6s ease';
        
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, 300 * (index + 1));
    });
});
</script>
{% endblock %}